<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrendPredictor - Plataforma de Pronósticos</title>
    <style>
        :root {
            --primary: #6a11cb;
            --secondary: #2575fc;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --dark: #2c3e50;
            --light: #ecf0f1;
            --gray: #7f8c8d;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            min-height: 100vh;
            padding-bottom: 2rem;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        header {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            display: flex;
            align-items: center;
        }
        
        .logo-icon {
            margin-right: 10px;
            font-size: 2rem;
        }
        
        .user-actions button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
            transition: all 0.3s;
        }
        
        .user-actions button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .hero {
            text-align: center;
            padding: 3rem 1rem;
            background: white;
            border-radius: 10px;
            margin: 2rem 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--dark);
        }
        
        .hero p {
            font-size: 1.2rem;
            color: var(--gray);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .categories {
            display: flex;
            overflow-x: auto;
            padding: 1.5rem 0;
            background: white;
            margin: 1rem 0;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .category {
            padding: 0.8rem 1.8rem;
            margin: 0 8px;
            border-radius: 25px;
            background: var(--light);
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            font-weight: 500;
        }
        
        .category i {
            margin-right: 8px;
        }
        
        .category.active {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 4px 10px rgba(106, 17, 203, 0.3);
        }
        
        .category:hover:not(.active) {
            background: #d6dbdf;
        }
        
        .predictions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            margin: 25px 0;
        }
        
        .prediction-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .prediction-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 20px rgba(0,0,0,0.15);
        }
        
        .media-container {
            height: 180px;
            overflow: hidden;
            position: relative;
        }
        
        .media-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .prediction-card:hover .media-container img {
            transform: scale(1.05);
        }
        
        .media-container .video-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #6a11cb, #2575fc);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }
        
        .card-header {
            padding: 20px 20px 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .category-tag {
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .time-remaining {
            font-size: 0.8rem;
            color: var(--gray);
            font-weight: 500;
        }
        
        .card-header h3 {
            margin: 10px 20px;
            color: var(--dark);
            line-height: 1.4;
        }
        
        .card-body {
            padding: 10px 20px 20px;
        }
        
        .card-body p {
            color: var(--gray);
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .odds-display {
            margin: 20px 0;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
        }
        
        .odds-value {
            font-weight: bold;
            font-size: 1.4rem;
            color: var(--dark);
            text-align: center;
            margin-bottom: 10px;
        }
        
        .odds-bar {
            height: 12px;
            background: #eee;
            border-radius: 6px;
            overflow: hidden;
            position: relative;
            margin: 15px 0;
        }
        
        .win-probability {
            height: 100%;
            background: var(--success);
            width: 54%;
        }
        
        .lose-probability {
            height: 100%;
            background: var(--danger);
            width: 46%;
            position: absolute;
            top: 0;
            right: 0;
        }
        
        .probability-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .stake-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            margin: 10px 0;
            font-size: 1rem;
        }
        
        .btn-predict {
            width: 100%;
            padding: 12px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            font-size: 1rem;
        }
        
        .btn-predict:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .btn-no {
            background: var(--gray);
            margin-top: 8px;
        }
        
        .user-stats {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 25px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }
        
        .stat {
            text-align: center;
            padding: 15px;
            min-width: 180px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
            margin: 10px 0;
        }
        
        .stat-label {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .trends-tools {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .trends-tools h2 {
            color: var(--dark);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .tool-card {
            background: var(--light);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .tool-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .tool-card h3 {
            margin-bottom: 10px;
            color: var(--dark);
        }
        
        .tool-card p {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .legal-notice {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 25px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            font-size: 0.9rem;
            color: var(--gray);
            text-align: center;
        }
        
        footer {
            background: var(--dark);
            color: white;
            padding: 2rem 0;
            margin-top: 3rem;
            border-radius: 10px 10px 0 0;
        }
        
        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }
        
        .footer-section {
            flex: 1;
            min-width: 250px;
            margin-bottom: 20px;
        }
        
        .footer-section h3 {
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            .predictions-grid {
                grid-template-columns: 1fr;
            }
            
            .user-stats {
                flex-direction: column;
            }
            
            .stat {
                margin: 15px 0;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .tools-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-chart-line logo-icon"></i>
                <span>TrendPredictor</span>
            </div>
            <div class="user-actions">
                <button onclick="login()"><i class="fas fa-sign-in-alt"></i> Iniciar sesión</button>
                <button onclick="signup()"><i class="fas fa-user-plus"></i> Registrarse</button>
            </div>
        </div>
    </header>
    
    <div class="container">
        <div class="hero">
            <h1>Pronósticos de Entretenimiento</h1>
            <p>Demuestra tu conocimiento sobre series, deportes, redes sociales y cultura pop. Gana puntos y compite con otros usuarios.</p>
        </div>
        
        <div class="categories">
            <div class="category active">
                <i class="fas fa-globe"></i> Todos
            </div>
            <div class="category">
                <i class="fas fa-tv"></i> Netflix
            </div>
            <div class="category">
                <i class="fas fa-broadcast-tower"></i> Programas TV
            </div>
            <div class="category">
                <i class="fab fa-tiktok"></i> TikTok
            </div>
            <div class="category">
                <i class="fas fa-newspaper"></i> Actualidad
            </div>
            <div class="category">
                <i class="fas fa-running"></i> Deportes
            </div>
            <div class="category">
                <i class="fas fa-star"></i> Celebrities
            </div>
        </div>
        
        <div class="user-stats">
            <div class="stat">
                <div class="stat-label">Mis Créditos</div>
                <div class="stat-value" id="user-credits">No logueado</div>
            </div>
            <div class="stat">
                <div class="stat-label">Pronósticos Hechos</div>
                <div class="stat-value" id="user-predictions">-</div>
            </div>
            <div class="stat">
                <div class="stat-label">% de Aciertos</div>
                <div class="stat-value" id="user-accuracy">-</div>
            </div>
            <div class="stat">
                <div class="stat-label">Ranking Global</div>
                <div class="stat-value" id="user-rank">-</div>
            </div>
        </div>
        
        <div id="predictions-container" class="predictions-grid">
            <p style="text-align:center; width:100%; padding:40px; color:var(--gray);">Cargando pronósticos...</p>
        </div>
        
        <div class="trends-tools">
            <h2>Herramientas para Encontrar Trends</h2>
            <div class="tools-grid">
                <div class="tool-card">
                    <div class="tool-icon">
                        <i class="fab fa-google"></i>
                    </div>
                    <h3>Google Trends</h3>
                    <p>Monitoriza búsquedas populares en Google por categoría y región</p>
                </div>
                <div class="tool-card">
                    <div class="tool-icon">
                        <i class="fas fa-hashtag"></i>
                    </div>
                    <h3>Hashtag Tracking</h3>
                    <p>Rastrea hashtags populares en Twitter, Instagram y TikTok</p>
                </div>
                <div class="tool-card">
                    <div class="tool-icon">
                        <i class="fab fa-imdb"></i>
                    </div>
                    <h3>IMDb & Rotten Tomatoes</h3>
                    <p>Revisa ratings y popularidad de series y películas</p>
                </div>
                <div class="tool-card">
                    <div class="tool-icon">
                        <i class="fas fa-newspaper"></i>
                    </div>
                    <h3>Noticias de Entretenimiento</h3>
                    <p>Portales especializados en cine, series y celebrities</p>
                </div>
            </div>
        </div>
        
        <div class="legal-notice">
            <p><strong>Importante:</strong> TrendPredictor es una plataforma de entretenimiento que utiliza puntos virtuales sin valor monetario. 
            No se permite el canje de puntos por dinero real. Solo está permitida la participación para mayores de 18 años.</p>
        </div>
    </div>
    
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>TrendPredictor</h3>
                    <p>La plataforma líder de pronósticos de entretenimiento</p>
                </div>
                <div class="footer-section">
                    <h3>Enlaces útiles</h3>
                    <p><a href="#" style="color:white;text-decoration:underline;">Términos y condiciones</a></p>
                    <p><a href="#" style="color:white;text-decoration:underline;">Política de privacidad</a></p>
                    <p><a href="#" style="color:white;text-decoration:underline;">Juego responsable</a></p>
                </div>
                <div class="footer-section">
                    <h3>Contacto</h3>
                    <p>info@trendpredictor.com</p>
                    <p>+34 910 123 456</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 TrendPredictor. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Supabase SDK -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

    <script>
        // ✅ CONFIGURACIÓN DE SUPABASE
        const supabaseUrl = 'https://wuilgfqgxhusypcrivoy.supabase.co';
        const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1aWxnZnFneGh1c3lwY3Jpdm95Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg1NDAyNDQsImV4cCI6MjA3NDExNjI0NH0.EH922YVZsqBwKSiw2DiKwWvk8TX2pkJWcQJv3gLH9Ug';
        const supabase = window.supabase.createClient(supabaseUrl, supabaseAnonKey);

        // ✅ REGISTRO
        function signup() {
            const email = prompt("Introduce tu email:");
            const password = prompt("Contraseña (mínimo 6 caracteres):");
            if (!email || !password || password.length < 6) {
                alert("Por favor, introduce un email válido y una contraseña de al menos 6 caracteres.");
                return;
            }
            supabase.auth.signUp({ email, password })
                .then(({ data, error }) => {
                    if (error) {
                        alert("Error: " + error.message);
                    } else {
                        alert("¡Registro exitoso! Revisa tu email para confirmar.");
                    }
                });
        }

        // ✅ LOGIN
        function login() {
            const email = prompt("Email:");
            const password = prompt("Contraseña:");
            supabase.auth.signInWithPassword({ email, password })
                .then(({ data, error }) => {
                    if (error) {
                        alert("Error: " + error.message);
                    } else {
                        alert("¡Bienvenido!");
                        loadUserProfile(data.user.id);
                    }
                });
        }

        // ✅ CARGAR PERFIL DEL USUARIO
        async function loadUserProfile(userId) {
            const { data, error } = await supabase.from('users').select('*').eq('id', userId).single();
            if (error) {
                console.error("Error al cargar perfil:", error);
                return;
            }
            document.getElementById('user-credits').innerText = data.credits.toLocaleString();
            document.getElementById('user-predictions').innerText = data.predictions_made;
            const accuracy = data.predictions_made > 0 ? Math.round((data.predictions_won / data.predictions_made) * 100) : 0;
            document.getElementById('user-accuracy').innerText = accuracy + '%';
            document.getElementById('user-rank').innerText = "#1,245";
        }

        // ✅ INICIALIZAR AL CARGAR LA PÁGINA
        document.addEventListener('DOMContentLoaded', async () => {
            // Limpiar URL si viene de Supabase
            if (window.location.hash.includes('access_token')) {
                window.history.replaceState({}, document.title, window.location.pathname);
            }

            // Verificar si ya hay un usuario logueado
            const {  { user } } = await supabase.auth.getUser();
            if (user) {
                document.getElementById('user-credits').innerText = "Cargando...";
                loadUserProfile(user.id);
            }
        });
    </script>
</body>
</html>
