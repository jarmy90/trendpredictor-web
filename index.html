<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrendPredictor - Plataforma de Pronósticos</title>
    <style>
        /* Tu CSS igual que antes (lo omito por brevedad, pero déjalo intacto) */
        :root { --primary: #6a11cb; /* ... resto de tu CSS ... */ }
        /* ... todo tu CSS aquí ... */
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Tu HTML igual que antes -->
    <header>...</header>
    <div class="container">...</div>
    <footer>...</footer>

    <!-- ✅ SOLO UNA VEZ: Supabase JS (sin espacios en la URL) -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

    <script>
        // ✅ CONFIGURACIÓN ÚNICA Y CORRECTA
        const supabaseUrl = 'https://wuilgfqgxhusypcrivoy.supabase.co'
        const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1aWxnZnFneGh1c3lwY3Jpdm95Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg1NDAyNDQsImV4cCI6MjA3NDExNjI0NH0.EH922YVZsqBwKSiw2DiKwWvk8TX2pkJWcQJv3gLH9Ug'
        const supabase = window.supabase.createClient(supabaseUrl, supabaseAnonKey)

        // Registro
        async function signup() {
            const email = prompt("Introduce tu email:")
            const password = prompt("Introduce tu contraseña (mínimo 6 caracteres):")
            if (!email || !password || password.length < 6) {
                alert("Datos inválidos")
                return
            }

            const { data, error } = await supabase.auth.signUp({ email, password })
            if (error) {
                alert("Error: " + error.message)
                console.error("Error registro:", error)
            } else {
                alert("¡Registro exitoso! Revisa tu email para confirmar.")
                const userId = data.user.id
                await supabase.from('users').insert({
                    id: userId,
                    email: email,
                    credits: 1000,
                    predictions_made: 0,
                    predictions_won: 0
                })
            }
        }

        // Login
        async function login() {
            const email = prompt("Email:")
            const password = prompt("Contraseña:")
            const { data, error } = await supabase.auth.signInWithPassword({ email, password })
            if (error) {
                alert("Error: " + error.message)
                console.error("Error login:", error)
            } else {
                alert("¡Bienvenido!")
                loadUserProfile(data.user.id)
            }
        }

        // Cargar perfil
        async function loadUserProfile(userId) {
            const { data, error } = await supabase.from('users').select('*').eq('id', userId).single()
            if (error) {
                console.log("Error perfil:", error)
            } else {
                document.getElementById('user-credits').innerText = data.credits.toLocaleString()
                document.getElementById('user-predictions').innerText = data.predictions_made
                const accuracy = data.predictions_made > 0 ? Math.round((data.predictions_won / data.predictions_made) * 100) : 0
                document.getElementById('user-accuracy').innerText = accuracy + '%'
                document
